# AgBlogger Caddy reverse proxy configuration
# Replace myblog.example.com with your domain
#
# Manual usage with docker-compose (the deploy script can generate this automatically):
#   Add this to docker-compose.yml:
#
#   caddy:
#     image: caddy:2
#     ports:
#       - "80:80"
#       - "443:443"
#     volumes:
#       - ./Caddyfile:/etc/caddy/Caddyfile
#       - caddy-data:/data
#     depends_on:
#       - agblogger

myblog.example.com {
    reverse_proxy agblogger:8000

    # Static asset caching
    header /assets/* {
        Cache-Control "public, max-age=31536000, immutable"
    }

    # HTML caching (short TTL for freshness)
    header /*.html {
        Cache-Control "public, max-age=60"
    }

    # API caching
    header /api/* {
        Cache-Control "no-cache"
    }

    # Compression
    encode gzip zstd
}
